import{A as B,a as C,g as A}from"./AppProgress.19b1f8a7.js";import{c,o,a as D,d as h,_ as f,b as t,e as s,w as d,r as a,m as k,t as F,f as m,p as M,g as P,F as $,h as T,i as l,j as x,A as V}from"./index.2d4cac90.js";import{g as I,a as L,A as N,b as S}from"./AppCaption.96e02462.js";const q={viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},H=D('<g clip-path="url(#a)"><path fill-rule="evenodd" clip-rule="evenodd" d="M12 20a8 8 0 1 0 0-16 8 8 0 0 0 0 16Zm0 2c5.523 0 10-4.477 10-10S17.523 2 12 2 2 6.477 2 12s4.477 10 10 10Z"></path><path fill-rule="evenodd" clip-rule="evenodd" d="M12 6a1 1 0 0 1 1 1v6a1 1 0 1 1-2 0V7a1 1 0 0 1 1-1Z"></path><path d="M13 17a1 1 0 1 1-2 0 1 1 0 0 1 2 0Z"></path></g><defs><clipPath id="a"><path fill="#fff" transform="translate(2 2)" d="M0 0h20v20H0z"></path></clipPath></defs>',2),O=[H];function j(e,r){return o(),c("svg",q,O)}const Z={render:j},R=h({name:"TeamsListFooter",components:{InfoIcon:Z,AppTooltip:B}});const y=e=>(M("data-v-096fbf12"),e=e(),P(),e),W={class:"footer-row"},z={class:"footer-col"},G=y(()=>t("span",{class:"footer-col__text footer-col__text--white"}," Team Elo Rankings ",-1)),J=y(()=>t("span",{class:"footer-col__text"}," k=32, init=1000 ",-1));function K(e,r,_,i,g,v){const u=a("info-icon"),n=a("app-tooltip");return o(),c("tr",W,[t("td",z,[s(n,{"max-width":"468px"},{activator:d(({on:p})=>[s(u,k(F(p),{fill:"#fff",width:"20",height:"20"}),null,16)]),default:d(()=>[m(" \u041F\u043E\u0441\u043B\u0435\u0434\u0443\u044E\u0449\u0438\u0439 \u0430\u043D\u0430\u043B\u0438\u0437 \u0441\u043E\u0431\u0440\u0430\u043D\u043D\u044B\u0445 \u043E\u0431\u0449\u0435\u0434\u043E\u0441\u0442\u0443\u043F\u043D\u044B\u0445 \u043F\u0440\u043E\u0444\u0438\u043B\u0435\u0439 \u0438\u0433\u0440\u043E\u043A\u043E\u0432 \u043E\u0442 OpenDota \u043F\u043E\u043A\u0430\u0437\u044B\u0432\u0430\u0435\u0442 \u043D\u0430\u0438\u0431\u043E\u043B\u0435\u0435 \u0432\u044B\u0441\u043E\u043A\u0438\u0439 \u0441\u0440\u0435\u0434\u043D\u0438\u0439 MMR, \u043F\u0440\u0438\u043C\u0435\u0440\u043D\u043E 3100. ")]),_:1}),G,J])])}const Q=f(R,[["render",K],["__scopeId","data-v-096fbf12"]]),U=h({name:"TeamsListHeader",data(){return{columns:["\u0420\u0430\u043D\u0433","\u041D\u0430\u0437\u0432\u0430\u043D\u0438\u0435 \u043A\u043E\u043C\u0430\u043D\u0434\u044B","\u0420\u0435\u0439\u0442\u0438\u043D\u0433","\u041F\u043E\u0431\u0435\u0434\u044B","\u041F\u0440\u043E\u0438\u0433\u0440\u044B\u0448\u0438"]}}});const X={class:"header-row"},Y=["textContent"];function ee(e,r,_,i,g,v){return o(),c("tr",X,[(o(!0),c($,null,T(e.columns,u=>(o(),c("th",{key:u,textContent:l(u)},null,8,Y))),128))])}const te=f(U,[["render",ee],["__scopeId","data-v-24775cd6"]]),se=h({name:"TeamsListItem",components:{AppProgress:C},props:{team:{type:Object,required:!0},index:{type:Number,required:!0,default:0},maxValues:{type:Object,required:!0}},computed:{order(){return I(this.index+1)},wins(){return Math.floor(this.team.wins)},losses(){return Math.floor(this.team.losses)},rating(){return Math.floor(this.team.rating)},winsPercent(){return this.wins*100/this.maxValues.wins},lossesPercent(){return this.losses*100/this.maxValues.losses},ratingPercent(){return this.rating*100/this.maxValues.rating},ended(){return L(this.team.last_match_time)}}});const ae={class:"list-item"},ue=["textContent"],oe={class:"list-item__column column"},ne=["src","alt"],re={class:"column__inner column__inner--no-gap"},ie={class:"list-item__column column"},le={class:"column__inner"},ce={class:"list-item__column"},_e={class:"column__inner"},me={class:"list-item__column"},de={class:"column__inner"};function pe(e,r,_,i,g,v){const u=a("router-link"),n=a("app-progress");return o(),c("tr",ae,[t("td",{class:"list-item__column",textContent:l(e.order)},null,8,ue),t("td",oe,[t("img",{class:"column__team-logo",src:e.team.logo_url,alt:e.team.name},null,8,ne),t("div",re,[s(u,{class:"column__team-name",to:`/teams/${e.team.team_id}/matches`,"aria-label":`\u041C\u0430\u0442\u0447\u0438 \u043A\u043E\u043C\u0430\u043D\u0434\u044B ${e.team.name}`,textContent:l(e.team.name)},null,8,["to","aria-label","textContent"]),m(" "+l(e.ended),1)])]),t("td",ie,[t("div",le,[m(l(e.rating)+" ",1),s(n,{value:e.ratingPercent},null,8,["value"])])]),t("td",ce,[t("div",_e,[m(l(e.wins)+" ",1),s(n,{value:e.winsPercent},null,8,["value"])])]),t("td",me,[t("div",de,[m(l(e.losses)+" ",1),s(n,{value:e.lossesPercent},null,8,["value"])])])])}const he=f(se,[["render",pe],["__scopeId","data-v-28eac250"]]),fe=h({name:"TeamsList",components:{TeamsListHeader:te,TeamsListItem:he,TeamsListFooter:Q,AppTable:N},props:{teams:{type:Array,required:!0,default:()=>[]},maxValues:{type:Object,required:!0},loading:{type:Boolean,default:!1}}});function ge(e,r,_,i,g,v){const u=a("teams-list-header"),n=a("teams-list-item"),p=a("teams-list-footer"),E=a("app-table");return o(),x(E,{loading:e.loading},{header:d(()=>[s(u)]),body:d(()=>[(o(!0),c($,null,T(e.teams,(w,b)=>(o(),x(n,{team:w,index:b,"max-values":e.maxValues,key:w.team_id},null,8,["team","index","max-values"]))),128))]),footer:d(()=>[s(p)]),_:1},8,["loading"])}const ve=f(fe,[["render",ge]]),$e=h({name:"TeamsPage",components:{TeamsList:ve,AppButton:V,AppCaption:S},data(){return{teams:[],loading:!1,error:!1,total:0,page:0,slice:10}},computed:{slicedTeams(){return this.teams.slice(0,this.slice)},maxWins(){return Math.max(...this.teams.map(({wins:e})=>e))},maxValues(){const e=[],r=[],_=[];return this.teams.forEach(i=>{e.push(i.wins),r.push(i.losses),_.push(i.rating)}),{wins:Math.max(...e),losses:Math.max(...r),rating:Math.max(..._)}}},methods:{async getTeams(){try{this.loading=!0,this.error=!1;const e=await A(this.page);return this.total+=e.length,e}catch(e){return this.error=!0,console.error(e),[]}finally{this.loading=!1}},onButtonClick(){this.slice>=this.total?this.page+=1:this.slice+=10}},watch:{page:{immediate:!0,async handler(){const e=await this.getTeams();this.teams.push(...e)}}}});function we(e,r,_,i,g,v){const u=a("app-caption"),n=a("teams-list"),p=a("app-button");return o(),c($,null,[s(u,null,{default:d(()=>[m("\u0421\u043F\u0438\u0441\u043E\u043A \u043A\u043E\u043C\u0430\u043D\u0434")]),_:1}),s(n,{teams:e.slicedTeams,"max-values":e.maxValues,loading:e.loading},null,8,["teams","max-values","loading"]),s(p,{class:"button",disabled:e.loading,onClick:e.onButtonClick},{default:d(()=>[m(l(e.error?"\u041E\u0448\u0438\u0431\u043A\u0430":"\u0417\u0430\u0433\u0440\u0443\u0437\u0438\u0442\u044C \u0435\u0449\u0435"),1)]),_:1},8,["disabled","onClick"])],64)}const Ee=f($e,[["render",we],["__scopeId","data-v-8a5132d9"]]);export{Ee as default};
